{
	"info": {
		"_postman_id": "complete-app-workflow-2025",
		"name": "üöÄ LogiTrack Complete Application Workflow",
		"description": "Complete end-to-end workflow covering ALL application features:\n- User Registration & Authentication (ADMIN, WAREHOUSE_MANAGER, CLIENT)\n- Infrastructure Setup (Warehouses, Suppliers, Products, Carriers)\n- Purchase Order Lifecycle (Create ‚Üí Approve ‚Üí Receive ‚Üí Inventory IN)\n- Sales Order Lifecycle (Create ‚Üí Reserve ‚Üí Ship ‚Üí Deliver ‚Üí Inventory OUT)\n- Query & Verification Operations\n- Error Scenarios & Edge Cases\n- Complete Audit Log Generation (Security, Business, Application)\n\nThis workflow respects Spring Security filter chain with proper role-based authorization.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üìã SETUP INSTRUCTIONS",
			"item": [
				{
					"name": "README - Complete Workflow Guide",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080"
						},
						"description": "## üéØ Purpose\nThis collection provides a complete end-to-end workflow for the entire LogiTrack application.\n\n## üìù What This Workflow Covers\n1. **Authentication**: Register and login for all 3 roles (ADMIN, WAREHOUSE_MANAGER, CLIENT)\n2. **Infrastructure**: Create warehouses, suppliers, products, and carriers\n3. **Purchase Orders**: Complete PO lifecycle from creation to inventory receipt\n4. **Sales Orders**: Complete SO lifecycle from creation to delivery\n5. **Verification**: Query all resources to verify operations\n6. **Error Scenarios**: Test edge cases and validation rules\n7. **Audit Logs**: Generate all types of logs for observability\n\n## üîë Roles & Permissions\n- **ADMIN**: Infrastructure setup, PO approval, system configuration\n- **WAREHOUSE_MANAGER**: PO creation, SO fulfillment (reserve, ship, deliver)\n- **CLIENT**: SO creation only\n\n## üöÄ Execution Order\nRun requests sequentially from Phase 1 to Phase 6.\nVariables will be automatically extracted and saved.\n\n## ‚úÖ Prerequisites\n1. Application running: `./mvnw spring-boot:run`\n2. Database running: `docker-compose ps` (PostgreSQL)\n3. ELK stack running (optional for observability): `docker-compose ps`\n\n## üìä Expected Results\nAfter completion:\n- 3 users created (ADMIN, WAREHOUSE_MANAGER, CLIENT)\n- 1 warehouse, 1 supplier, 1+ products, 1 carrier\n- 1 completed purchase order (100 units IN)\n- 1 completed sales order (50 units OUT)\n- 50 units remaining in inventory\n- All audit logs generated\n\n## üîç Verification\nUse Phase 5 to query all resources and verify the complete workflow."
					},
					"response": []
				}
			]
		},
		{
			"name": "üîê PHASE 1: User Registration & Authentication",
			"item": [
				{
					"name": "1.0 ‚ùå Failed Login (Security Log Test)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"console.log(\"‚úÖ Security log: authentication_failure\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"wrong@email.com\",\n  \"password\": \"WrongPassword123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/login",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "login"]
						},
						"description": "Test failed login to generate authentication_failure security log"
					},
					"response": []
				},
				{
					"name": "1.1 ‚úÖ Register ADMIN User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.userId) {",
									"    pm.collectionVariables.set(\"ADMIN_ID\", jsonData.userId);",
									"    console.log(\"‚úÖ ADMIN_ID: \" + jsonData.userId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: user_registration\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"System Administrator\",\n  \"email\": \"admin@logitrack.com\",\n  \"passwordHash\": \"AdminPass123!\",\n  \"role\": \"ADMIN\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/register",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "register"]
						},
						"description": "Register ADMIN user for infrastructure management and approvals"
					},
					"response": []
				},
				{
					"name": "1.2 ‚úÖ Login ADMIN",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.accessToken) {",
									"    pm.collectionVariables.set(\"ADMIN_TOKEN\", jsonData.accessToken);",
									"    console.log(\"‚úÖ ADMIN_TOKEN saved\");",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: authentication_success\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@logitrack.com\",\n  \"password\": \"AdminPass123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/login",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "login"]
						},
						"description": "Login ADMIN to obtain JWT token for infrastructure operations"
					},
					"response": []
				},
				{
					"name": "1.3 ‚úÖ Register Warehouse Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.userId) {",
									"    pm.collectionVariables.set(\"WAREHOUSE_MANAGER_ID\", jsonData.userId);",
									"    console.log(\"‚úÖ WAREHOUSE_MANAGER_ID: \" + jsonData.userId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: user_registration\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Warehouse\",\n  \"email\": \"john@warehouse.com\",\n  \"passwordHash\": \"SecurePassword123!\",\n  \"role\": \"WAREHOUSE_MANAGER\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/register",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "register"]
						},
						"description": "Register WAREHOUSE_MANAGER for order fulfillment operations"
					},
					"response": []
				},
				{
					"name": "1.4 ‚úÖ Login Warehouse Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.accessToken) {",
									"    pm.collectionVariables.set(\"WH_MANAGER_TOKEN\", jsonData.accessToken);",
									"    console.log(\"‚úÖ WH_MANAGER_TOKEN saved\");",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: authentication_success\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@warehouse.com\",\n  \"password\": \"SecurePassword123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/login",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "login"]
						},
						"description": "Login Warehouse Manager to obtain JWT token"
					},
					"response": []
				},
				{
					"name": "1.5 ‚úÖ Register Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.userId) {",
									"    pm.collectionVariables.set(\"CLIENT_ID\", jsonData.userId);",
									"    console.log(\"‚úÖ CLIENT_ID: \" + jsonData.userId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: user_registration\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"ABC Tech Store\",\n  \"email\": \"orders@abctech.com\",\n  \"passwordHash\": \"ClientPassword123!\",\n  \"role\": \"CLIENT\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/register",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "register"]
						},
						"description": "Register CLIENT for creating sales orders"
					},
					"response": []
				},
				{
					"name": "1.6 ‚úÖ Login Client",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.accessToken) {",
									"    pm.collectionVariables.set(\"CLIENT_TOKEN\", jsonData.accessToken);",
									"    console.log(\"‚úÖ CLIENT_TOKEN saved\");",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Security log: authentication_success\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"orders@abctech.com\",\n  \"password\": \"ClientPassword123!\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/login",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "login"]
						},
						"description": "Login Client to obtain JWT token"
					},
					"response": []
				}
			],
			"description": "Phase 1: User authentication setup\n- Register and login all 3 user roles\n- Generates 7 security logs (1 failure + 3 registrations + 3 logins)\n- Saves JWT tokens for subsequent requests"
		},
		{
			"name": "üèóÔ∏è PHASE 2: Infrastructure Setup (ADMIN Required)",
			"item": [
				{
					"name": "2.1 Create Warehouse",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.warehouseId) {",
									"    pm.collectionVariables.set(\"WAREHOUSE_ID\", jsonData.warehouseId);",
									"    console.log(\"‚úÖ WAREHOUSE_ID: \" + jsonData.warehouseId);",
									"}",
									"if (jsonData.code) {",
									"    pm.collectionVariables.set(\"WAREHOUSE_CODE\", jsonData.code);",
									"    console.log(\"‚úÖ WAREHOUSE_CODE: \" + jsonData.code);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Main Distribution Center\",\n  \"location\": \"Downtown NYC\",\n  \"warehouseManagerId\": \"{{WAREHOUSE_MANAGER_ID}}\",\n  \"active\": true\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/warehouses/initialize",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "warehouses", "initialize"]
						},
						"description": "ADMIN creates warehouse. Required for all order operations."
					},
					"response": []
				},
				{
					"name": "2.2 Create Supplier",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.supplierId) {",
									"    pm.collectionVariables.set(\"SUPPLIER_ID\", jsonData.supplierId);",
									"    console.log(\"‚úÖ SUPPLIER_ID: \" + jsonData.supplierId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Tech Supplies Inc\",\n  \"contactInfo\": \"1-800-TECH-SUP\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/suppliers/add",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "suppliers", "add"]
						},
						"description": "ADMIN creates supplier for purchase orders"
					},
					"response": []
				},
				{
					"name": "2.3 Create Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.productId) {",
									"    pm.collectionVariables.set(\"PRODUCT_ID\", jsonData.productId);",
									"    console.log(\"‚úÖ PRODUCT_ID: \" + jsonData.productId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business log: product_change\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Laptop Computer\",\n  \"category\": \"Electronics\",\n  \"active\": true\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/products/add",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "products", "add"]
						},
						"description": "ADMIN creates product. Generates product_change business log."
					},
					"response": []
				},
				{
					"name": "2.4 Create Carrier",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.carrierId) {",
									"    pm.collectionVariables.set(\"CARRIER_ID\", jsonData.carrierId);",
									"    console.log(\"‚úÖ CARRIER_ID: \" + jsonData.carrierId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"FastShip Logistics\",\n  \"contactInfo\": \"1-800-FASTSHIP\",\n  \"maxDailyCapacity\": 50,\n  \"currentDailyShipments\": 0,\n  \"cutOffTime\": \"14:00:00\",\n  \"active\": true\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/carriers/add",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "carriers", "add"]
						},
						"description": "ADMIN creates carrier for shipments"
					},
					"response": []
				}
			],
			"description": "Phase 2: Infrastructure setup\n- All operations require ADMIN role\n- Creates warehouse, supplier, product, carrier\n- Generates 1 business log (product_change)"
		},
		{
			"name": "üì¶ PHASE 3: Purchase Order Lifecycle",
			"item": [
				{
					"name": "3.1 Create Purchase Order (WH_MANAGER)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.purchaseOrderId) {",
									"    pm.collectionVariables.set(\"PURCHASE_ORDER_ID\", jsonData.purchaseOrderId);",
									"    console.log(\"‚úÖ PURCHASE_ORDER_ID: \" + jsonData.purchaseOrderId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business log: purchase_order_created\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"warehouseId\": \"{{WAREHOUSE_ID}}\",\n  \"supplierId\": \"{{SUPPLIER_ID}}\",\n  \"lines\": [\n    {\n      \"productId\": \"{{PRODUCT_ID}}\",\n      \"quantity\": 100,\n      \"unitPrice\": 800.00\n    }\n  ]\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/purchase-orders/create",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "purchase-orders", "create"]
						},
						"description": "WAREHOUSE_MANAGER creates purchase order for 100 laptop units.\nStatus: PENDING"
					},
					"response": []
				},
				{
					"name": "3.2 Approve Purchase Order (ADMIN)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business log: purchase_order_status_change (PENDING ‚Üí APPROVED)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"APPROVED\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/admins/purchaseOrder-status/update/{{PURCHASE_ORDER_ID}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "admins", "purchaseOrder-status", "update", "{{PURCHASE_ORDER_ID}}"]
						},
						"description": "ADMIN approves purchase order.\nStatus: PENDING ‚Üí APPROVED"
					},
					"response": []
				},
				{
					"name": "3.3 Receive Purchase Order (ADMIN - Inventory IN)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business logs generated:\");",
									"console.log(\"   - purchase_order_status_change (APPROVED ‚Üí RECEIVED)\");",
									"console.log(\"   - inventory_movement (IN - 100 units)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"RECEIVED\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/admins/purchaseOrder-status/update/{{PURCHASE_ORDER_ID}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "admins", "purchaseOrder-status", "update", "{{PURCHASE_ORDER_ID}}"]
						},
						"description": "ADMIN marks PO as received. This adds 100 units to inventory.\nStatus: APPROVED ‚Üí RECEIVED\nInventory: 0 ‚Üí 100 units"
					},
					"response": []
				}
			],
			"description": "Phase 3: Purchase Order complete lifecycle\n- WAREHOUSE_MANAGER creates PO\n- ADMIN approves PO\n- ADMIN receives PO (adds inventory)\n- Generates 3 business logs"
		},
		{
			"name": "üõí PHASE 4: Sales Order Lifecycle",
			"item": [
				{
					"name": "4.1 Create Sales Order (CLIENT)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"var jsonData = pm.response.json();",
									"if (jsonData.salesOrderId) {",
									"    pm.collectionVariables.set(\"SALES_ORDER_ID\", jsonData.salesOrderId);",
									"    console.log(\"‚úÖ SALES_ORDER_ID: \" + jsonData.salesOrderId);",
									"}",
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business log: sales_order_created\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{CLIENT_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"clientId\": \"{{CLIENT_ID}}\",\n  \"warehouseId\": \"{{WAREHOUSE_ID}}\",\n  \"lines\": [\n    {\n      \"productId\": \"{{PRODUCT_ID}}\",\n      \"quantity\": 50,\n      \"unitPrice\": 1200.00,\n      \"backorder\": false\n    }\n  ]\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/create",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "create"]
						},
						"description": "CLIENT creates sales order for 50 laptop units.\nStatus: CREATED"
					},
					"response": []
				},
				{
					"name": "4.2 Reserve Sales Order (WH_MANAGER - Stock OUT)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business logs generated:\");",
									"console.log(\"   - stock_reservation (50 units)\");",
									"console.log(\"   - sales_order_status_change (CREATED ‚Üí RESERVED)\");",
									"console.log(\"   - inventory_movement (OUT - 50 units)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/{{SALES_ORDER_ID}}/reserve",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "{{SALES_ORDER_ID}}", "reserve"]
						},
						"description": "WAREHOUSE_MANAGER reserves inventory for the sales order.\nStatus: CREATED ‚Üí RESERVED\nInventory: 100 ‚Üí 50 units (50 reserved)"
					},
					"response": []
				},
				{
					"name": "4.3 Ship Sales Order (WH_MANAGER)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business logs generated:\");",
									"console.log(\"   - shipment_created\");",
									"console.log(\"   - sales_order_status_change (RESERVED ‚Üí SHIPPED)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"carrierId\": \"{{CARRIER_ID}}\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/{{SALES_ORDER_ID}}/ship",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "{{SALES_ORDER_ID}}", "ship"]
						},
						"description": "WAREHOUSE_MANAGER ships the sales order with carrier.\nStatus: RESERVED ‚Üí SHIPPED"
					},
					"response": []
				},
				{
					"name": "4.4 Deliver Sales Order (WH_MANAGER)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"console.log(\"‚úÖ Business logs generated:\");",
									"console.log(\"   - shipment_status_change\");",
									"console.log(\"   - sales_order_status_change (SHIPPED ‚Üí DELIVERED)\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/{{SALES_ORDER_ID}}/deliver",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "{{SALES_ORDER_ID}}", "deliver"]
						},
						"description": "WAREHOUSE_MANAGER marks order as delivered.\nStatus: SHIPPED ‚Üí DELIVERED\nOrder complete!"
					},
					"response": []
				}
			],
			"description": "Phase 4: Sales Order complete lifecycle\n- CLIENT creates SO\n- WAREHOUSE_MANAGER reserves inventory\n- WAREHOUSE_MANAGER ships with carrier\n- WAREHOUSE_MANAGER marks as delivered\n- Generates 7 business logs"
		},
		{
			"name": "‚úÖ PHASE 5: Verification & Query Operations",
			"item": [
				{
					"name": "5.1 Get All Warehouses",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Total warehouses: \" + jsonData.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/warehouses/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "warehouses", "all"]
						},
						"description": "Query all warehouses"
					},
					"response": []
				},
				{
					"name": "5.2 Get Warehouse by Code",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/warehouses/{{WAREHOUSE_CODE}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "warehouses", "{{WAREHOUSE_CODE}}"]
						},
						"description": "Query specific warehouse by code"
					},
					"response": []
				},
				{
					"name": "5.3 Get All Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Total products: \" + jsonData.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/products/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "products", "all"]
						},
						"description": "Query all products"
					},
					"response": []
				},
				{
					"name": "5.4 Get All Suppliers",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Total suppliers: \" + jsonData.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/suppliers/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "suppliers", "all"]
						},
						"description": "Query all suppliers"
					},
					"response": []
				},
				{
					"name": "5.5 Get All Purchase Orders",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Total purchase orders: \" + jsonData.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/purchase-orders/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "purchase-orders", "all"]
						},
						"description": "Query all purchase orders"
					},
					"response": []
				},
				{
					"name": "5.6 Get Purchase Order by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üì¶ PO Status: \" + jsonData.status);",
									"console.log(\"üì¶ PO Total: $\" + jsonData.totalAmount);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/purchase-orders/{{PURCHASE_ORDER_ID}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "purchase-orders", "{{PURCHASE_ORDER_ID}}"]
						},
						"description": "Query specific purchase order by ID"
					},
					"response": []
				},
				{
					"name": "5.7 Get All Sales Orders",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üìä Total sales orders: \" + jsonData.length);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "all"]
						},
						"description": "Query all sales orders"
					},
					"response": []
				},
				{
					"name": "5.8 Get Sales Order by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"var jsonData = pm.response.json();",
									"console.log(\"üì¶ SO Status: \" + jsonData.status);",
									"console.log(\"üì¶ SO Total: $\" + jsonData.totalAmount);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/{{SALES_ORDER_ID}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "{{SALES_ORDER_ID}}"]
						},
						"description": "Query specific sales order by ID"
					},
					"response": []
				}
			],
			"description": "Phase 5: Query and verification operations\n- Get all resources (warehouses, products, suppliers)\n- Get specific resources by ID/code\n- Verify order statuses and totals\n- All queries use appropriate role tokens"
		},
		{
			"name": "‚ö†Ô∏è PHASE 6: Error Scenarios & Edge Cases",
			"item": [
				{
					"name": "6.1 Error: Unauthorized Access (No Token)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});",
									"console.log(\"‚úÖ Expected error: Unauthorized access\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/api/warehouses/all",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "warehouses", "all"]
						},
						"description": "Test unauthorized access without JWT token"
					},
					"response": []
				},
				{
					"name": "6.2 Error: Forbidden Access (Wrong Role)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 403\", function () {",
									"    pm.response.to.have.status(403);",
									"});",
									"console.log(\"‚úÖ Expected error: Forbidden - CLIENT cannot create products\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{CLIENT_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Unauthorized Product\",\n  \"category\": \"Test\",\n  \"active\": true\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/products/add",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "products", "add"]
						},
						"description": "Test forbidden access - CLIENT trying to create product (requires ADMIN)"
					},
					"response": []
				},
				{
					"name": "6.3 Error: Ship Without Reserve",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 404\", function () {",
									"    pm.expect([400, 404]).to.include(pm.response.code);",
									"});",
									"console.log(\"‚úÖ Expected error: Cannot ship unreserved order\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{WH_MANAGER_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"carrierId\": \"{{CARRIER_ID}}\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/00000000-0000-0000-0000-000000000000/ship",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "00000000-0000-0000-0000-000000000000", "ship"]
						},
						"description": "Test business rule: Cannot ship order without reserving first"
					},
					"response": []
				},
				{
					"name": "6.4 Error: Insufficient Inventory",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"console.log(\"‚úÖ Expected error: Insufficient inventory\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{CLIENT_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"clientId\": \"{{CLIENT_ID}}\",\n  \"warehouseId\": \"{{WAREHOUSE_ID}}\",\n  \"lines\": [\n    {\n      \"productId\": \"{{PRODUCT_ID}}\",\n      \"quantity\": 999,\n      \"unitPrice\": 1200.00,\n      \"backorder\": false\n    }\n  ]\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/sales-orders/create",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "sales-orders", "create"]
						},
						"description": "Test business rule: Cannot create SO for quantity exceeding available inventory (50 available, requesting 999)"
					},
					"response": []
				},
				{
					"name": "6.5 Error: Invalid PO Status Transition",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400\", function () {",
									"    pm.response.to.have.status(400);",
									"});",
									"console.log(\"‚úÖ Expected error: Invalid status transition\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{ADMIN_TOKEN}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"PENDING\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/admins/purchaseOrder-status/update/{{PURCHASE_ORDER_ID}}",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "admins", "purchaseOrder-status", "update", "{{PURCHASE_ORDER_ID}}"]
						},
						"description": "Test business rule: Cannot transition PO from RECEIVED back to PENDING"
					},
					"response": []
				},
				{
					"name": "6.6 Error: Duplicate User Registration",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 400 or 409\", function () {",
									"    pm.expect([400, 409]).to.include(pm.response.code);",
									"});",
									"console.log(\"‚úÖ Expected error: Email already exists\");"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Duplicate Admin\",\n  \"email\": \"admin@logitrack.com\",\n  \"passwordHash\": \"Password123!\",\n  \"role\": \"ADMIN\"\n}"
						},
						"url": {
							"raw": "http://localhost:8080/api/auth/register",
							"protocol": "http",
							"host": ["localhost"],
							"port": "8080",
							"path": ["api", "auth", "register"]
						},
						"description": "Test validation: Cannot register user with duplicate email"
					},
					"response": []
				}
			],
			"description": "Phase 6: Error scenarios and edge cases\n- Test authentication and authorization failures\n- Test business rule violations\n- Test validation errors\n- All errors should return appropriate HTTP status codes"
		},
		{
			"name": "üìä PHASE 7: Observability Verification (Optional)",
			"item": [
				{
					"name": "7.1 Check Elasticsearch Indices",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:9200/_cat/indices?v",
							"protocol": "http",
							"host": ["localhost"],
							"port": "9200",
							"path": ["_cat", "indices"],
							"query": [
								{
									"key": "v",
									"value": null
								}
							]
						},
						"description": "Verify Elasticsearch indices exist (requires ELK stack)"
					},
					"response": []
				},
				{
					"name": "7.2 Search Security Logs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:9200/logitrack-security-*/_search?size=10&pretty",
							"protocol": "http",
							"host": ["localhost"],
							"port": "9200",
							"path": ["logitrack-security-*", "_search"],
							"query": [
								{
									"key": "size",
									"value": "10"
								},
								{
									"key": "pretty",
									"value": null
								}
							]
						},
						"description": "View recent security audit logs"
					},
					"response": []
				},
				{
					"name": "7.3 Search Business Logs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:9200/logitrack-business-*/_search?size=10&pretty",
							"protocol": "http",
							"host": ["localhost"],
							"port": "9200",
							"path": ["logitrack-business-*", "_search"],
							"query": [
								{
									"key": "size",
									"value": "10"
								},
								{
									"key": "pretty",
									"value": null
								}
							]
						},
						"description": "View recent business audit logs"
					},
					"response": []
				},
				{
					"name": "7.4 Count All Logs",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:9200/logitrack-*/_count?pretty",
							"protocol": "http",
							"host": ["localhost"],
							"port": "9200",
							"path": ["logitrack-*", "_count"],
							"query": [
								{
									"key": "pretty",
									"value": null
								}
							]
						},
						"description": "Total count of all audit logs"
					},
					"response": []
				}
			],
			"description": "Phase 7: Observability verification (optional)\n- Requires ELK stack to be running\n- Verifies audit logs are being generated\n- Useful for testing observability features"
		}
	],
	"variable": [
		{
			"key": "ADMIN_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "ADMIN_TOKEN",
			"value": "",
			"type": "string"
		},
		{
			"key": "WAREHOUSE_MANAGER_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "WH_MANAGER_TOKEN",
			"value": "",
			"type": "string"
		},
		{
			"key": "CLIENT_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "CLIENT_TOKEN",
			"value": "",
			"type": "string"
		},
		{
			"key": "WAREHOUSE_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "WAREHOUSE_CODE",
			"value": "",
			"type": "string"
		},
		{
			"key": "SUPPLIER_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "PRODUCT_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "CARRIER_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "PURCHASE_ORDER_ID",
			"value": "",
			"type": "string"
		},
		{
			"key": "SALES_ORDER_ID",
			"value": "",
			"type": "string"
		}
	]
}
